---
import { siteConfig } from "../config";

const banner = siteConfig.banner;
const images = Array.isArray(banner.src) ? banner.src : [banner.src];
const position = banner.position || "center";

// Use only the first image for simplicity
const firstImage = images[0];
let imageImport = firstImage;

if (!firstImage.startsWith('/') && !firstImage.startsWith('http')) {
	try {
		const imported = await import(`../assets/images/${firstImage.replace('assets/images/', '')}`);
		imageImport = imported.default.src;
	} catch {
		imageImport = firstImage;
	}
}
---

{banner.enable && (
	<div class="banner-wrapper">
		<div class="banner-container">
			<img
				src={imageImport}
				alt="Banner"
				class="banner-image"
				style={`object-position: ${position}`}
				loading="eager"
			/>
			<div class="banner-fade-overlay"></div>
		</div>
	</div>
)}


<style>
.banner-wrapper {
	position: relative;
	width: 100%;
	margin-bottom: 0;
	overflow: hidden;
}

.banner-container {
	position: relative;
	width: 100%;
	height: 350px;
	overflow: hidden;
	border-radius: 0.75rem;
}

.banner-image {
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: center center;
}

/* Subtle fade overlay at bottom */
.banner-fade-overlay {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 120px;
	background: linear-gradient(
		to bottom,
		transparent 0%,
		rgba(0, 0, 0, 0.2) 60%,
		rgba(0, 0, 0, 0.4) 100%
	);
	z-index: 5;
	pointer-events: none;
}

/* Dark mode fade */
:global(.dark) .banner-fade-overlay {
	background: linear-gradient(
		to bottom,
		transparent 0%,
		rgba(0, 0, 0, 0.3) 60%,
		rgba(0, 0, 0, 0.5) 100%
	);
}

@media (max-width: 768px) {
	.banner-container {
		height: 200px;
		border-radius: 0.5rem;
	}

	.banner-fade-overlay {
		height: 80px;
	}
}
</style>